(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[310],{41886:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/member",function(){return n(33905)}])},33905:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var r=n(47568),a=n(26042),o=n(29815),i=n(20414),s=n(85893),c=n(36336),u=n(30120),l=n(29630),d=n(44373),m=n(49837),f=n(91359),h=n(54225),x=n(67836),p=n(69647),g=n(79072),v=n(80562),Z=n(41733),j=n(44731),y=n(67294),b=n(21744),_=function(e){return(0,b.h)("/companies/add",{method:"POST",data:e})},w=function(e,t){return(0,b.h)("/companies/".concat(e),{method:"PUT",data:t})},S={card:{margin:"40px"},cardInput:{textAlign:"center"},textField:{width:"50%",margin:"20px 0"}},C=function(){var e=function(e){var t,n=0;for(t=0;t<e.length;t+=1)n=e.charCodeAt(t)+((n<<5)-n);var r="#";for(t=0;t<3;t+=1){r+="00".concat((n>>8*t&255).toString(16)).slice(-2)}return r},t=(0,y.useState)(""),n=t[0],C=t[1],A=(0,y.useState)(""),E=A[0],N=A[1],k=(0,y.useState)(""),P=k[0],z=k[1],T=(0,y.useState)([]),I=T[0],B=T[1],M=(0,y.useState)("block"),W=M[0],D=M[1],F=(0,y.useState)("none"),O=F[0],U=F[1],X=(0,y.useState)([]),q=X[0],L=X[1];(0,y.useEffect)((function(){var e=function(){var e=(0,r.Z)((function(){var e;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return[4,(0,b.h)("/companies/list",{method:"GET"})];case 1:return e=t.sent().data,L(e),[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[]);var G=function(){var e=(0,r.Z)((function(e){var t,r,a;return(0,i.__generator)(this,(function(o){switch(o.label){case 0:for(t=0;t<q.length;t++)if(q[t].companyName===e)return C(q[t]._id),console.log(n),[2,q[t].teamMember];return t!==q.length?[3,2]:(r={companyName:"".concat(e),teamMember:[]},[4,_(r)]);case 1:return a=o.sent(),C(a.data._id),[2,r.teamMember];case 2:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),K=I.map((function(t){return(0,s.jsx)(g.ZP,{item:!0,xs:6,children:(0,s.jsxs)(m.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsx)(j.Z,(0,a.Z)({},(n="".concat(t.toUpperCase()),{sx:{bgcolor:e(n)},children:"".concat(n.split(" ")[0][0])}))),(0,s.jsx)(l.Z,{sx:{flex:1,marginLeft:2},children:t}),(0,s.jsx)(v.Z,{"aria-label":"delete",onClick:function(){return e=t,void B((function(t){for(var n=0;n<t.length;n++)t[n]===e&&t.splice(n,1);return(0,o.Z)(t)}));var e},children:(0,s.jsx)(Z.Z,{})})]})},t);var n})),R=function(){var e=(0,r.Z)((function(e){var t,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:e.preventDefault(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,G(E)];case 2:return t=r.sent(),B(t),D("none"),U("block"),[3,4];case 3:return n=r.sent(),console.error("Failed to match company due to error: ",n),[3,4];case 4:return console.log(e),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=(0,r.Z)((function(e){return(0,i.__generator)(this,(function(t){var n;return e.preventDefault(),/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(P)?(n=P,B((function(e){return(0,o.Z)(e).concat([n])})),alert("A new member has joined your team")):alert("Invalid email format"),z(""),[2]}))}));return function(t){return e.apply(this,arguments)}}();return(0,y.useEffect)((function(){var e={companyName:E,teamMember:I};console.log(n,e);var t=function(){var t=(0,r.Z)((function(){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return[4,w(n,e)];case 1:return t.sent(),[2]}}))}));return function(){return t.apply(this,arguments)}}();t()}),[I]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c.Z,{component:"form",onSubmit:R,maxWidth:"md",sx:{display:"".concat(W)},children:[(0,s.jsx)(u.Z,{sx:{width:"100%"}}),(0,s.jsx)(l.Z,{sx:{fontSize:40},color:"text.secondary",gutterBottom:!0,children:"Create Company"}),(0,s.jsx)(d.Z,{variant:"middle"}),(0,s.jsx)(m.Z,{style:S.card,sx:{minWidth:275},children:(0,s.jsxs)(f.Z,{children:[(0,s.jsx)(p.Z,{sx:{textAlign:"center"},component:"img",image:"./png/logo-no-background-h.png",alt:"sortlog icon"}),(0,s.jsx)(l.Z,{sx:{fontSize:20,textAlign:"center"},color:"text.secondary",gutterBottom:!0,children:"What is the name of your company?"}),(0,s.jsx)(u.Z,{sx:S.cardInput,children:(0,s.jsx)(x.Z,{style:S.textField,required:!0,label:"Company Name",value:E,onChange:function(e){var t=e.target.value;N(t),console.log(t)}})})]})}),(0,s.jsx)(d.Z,{variant:"middle"}),(0,s.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse"},children:(0,s.jsx)(h.Z,{type:"submit",sx:{margin:"20px"},children:"NEXT"})})]}),(0,s.jsxs)(c.Z,{maxWidth:"md",sx:{display:"".concat(O)},children:[(0,s.jsx)(u.Z,{sx:{width:"100%"}}),(0,s.jsx)(m.Z,{style:S.card,sx:{minWidth:275},children:(0,s.jsxs)(f.Z,{component:"form",onSubmit:$,children:[(0,s.jsx)(l.Z,{sx:{fontSize:20,marginBottom:5},color:"text.secondary",gutterBottom:!0,children:"Team Member"}),(0,s.jsx)(g.ZP,{container:!0,rowSpacing:1,columnSpacing:{xs:1,sm:2,md:3},sx:{marginBottom:8},children:K}),(0,s.jsxs)("div",{style:{display:"flex"},children:[(0,s.jsx)(x.Z,{style:{flex:1},required:!0,label:"Email of team members",value:P,onChange:function(e){var t=e.target.value;z(t),console.log(P)}}),(0,s.jsx)(h.Z,{type:"submit",children:"+ Add"})]})]})}),(0,s.jsx)(d.Z,{variant:"middle"}),(0,s.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse"},children:(0,s.jsx)(h.Z,{sx:{margin:"20px"},children:"SKIP"})})]})]})}},21744:function(e,t,n){"use strict";n.d(t,{h:function(){return i},n:function(){return s}});var r=n(26042),a=n(9669),o=n.n(a),i=function(e,t){var n=function(){var e=o().create();e.defaults.baseURL="http://localhost:4000/api/";var t=localStorage.getItem("token");return e.defaults.headers.common.Authorization=t||"",e.interceptors.response.use((function(e){return e}),(function(e){return e&&console.log(e.response),Promise.reject(e)})),e}();return n(e,(0,r.Z)({},t))},s=function(e,t){return o().create()(e,(0,r.Z)({},t))}}},function(e){e.O(0,[429,72,121,947,774,888,179],(function(){return t=41886,e(e.s=t);var t}));var t=e.O();_N_E=t}]);