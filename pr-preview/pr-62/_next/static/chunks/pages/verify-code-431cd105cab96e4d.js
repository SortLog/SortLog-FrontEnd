(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[684],{64518:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify-code",function(){return n(8732)}])},46723:function(e,r,n){"use strict";n.d(r,{s:function(){return i}});var t=n(67294),i=function(){var e=(0,t.useRef)(!1);return(0,t.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),(0,t.useCallback)((function(){return e.current}),[])}},8732:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return A}});var t=n(85893),i=n(9008),o=n.n(i),a=n(41664),s=n.n(a),c=n(11163),l=n(30120),u=n(49837),d=n(29630),f=n(44373),h=n(68346),m=n(47568),x=n(20414),g=n(67294),v=n(74231),y=n(82580),p=n(67836),b=n(32631),j=n(54225),Z=n(89731),_=n(46723),C=n(86501),S=function(){var e=(0,_.s)(),r=(0,c.useRouter)(),n=(0,Z.a)(),i=n.verifyCode,o=n.registerBackend,a=(0,g.useState)(""),s=a[0],u=a[1],f=JSON.parse(localStorage.getItem("currentUser"));console.log("get user info"+f);var h=(0,y.TA)({enableReinitialize:!0,initialValues:{email:f.email,code:["","","","","",""],submit:null},validationSchema:v.Ry({email:v.Z_().email("Must be a valid email").max(255).required("Email is required"),code:v.IX().of(v.Z_().required("Code is required"))}),onSubmit:function(){var n=(0,m.Z)((function(n,t){var a;return(0,x.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),console.log("verify code"),[4,i(n.email,n.code.join(""))];case 1:return s.sent(),console.log("register in the backend"),[4,o(f.email,f.name,f.provider)];case 2:return s.sent(),e()&&r.push("/login").catch(console.error),[3,4];case 3:return a=s.sent(),console.error(a),C.ZP.error(a.message),e()&&(t.setStatus({success:!1}),t.setErrors({submit:a.message}),t.setSubmitting(!1)),[3,4];case 4:return[2]}}))}));return function(e,r){return n.apply(this,arguments)}}()});(0,g.useEffect)((function(){var e=sessionStorage.getItem("username");e&&u(e)}),[]);var S=function(e){var r=e.clipboardData.getData("text").split("");if(6===r.length){var n=!0;r.forEach((function(e){Number.isInteger(parseInt(e,10))||(n=!1)})),n&&h.setFieldValue("code",r)}};return(0,t.jsxs)("form",{noValidate:!0,onSubmit:h.handleSubmit,children:[s?(0,t.jsx)(p.Z,{disabled:!0,fullWidth:!0,margin:"normal",value:s}):(0,t.jsx)(p.Z,{autoFocus:!0,error:Boolean(h.touched.email&&h.errors.email),fullWidth:!0,label:"Email Address",margin:"normal",name:"email",onBlur:h.handleBlur,onChange:h.handleChange,type:"email",value:h.values.email}),(0,t.jsx)(d.Z,{color:"textSecondary",sx:{mb:2,mt:3},variant:"subtitle2",children:"Verification code"}),(0,t.jsx)(l.Z,{sx:{columnGap:"16px",display:"grid",gridTemplateColumns:"repeat(7, 1fr)",pt:1},children:[1,2,3,4,5,6].map((function(e,r){return(0,t.jsx)(p.Z,{error:Boolean(Array.isArray(h.touched.code)&&6===h.touched.code.length&&h.errors.code),fullWidth:!0,name:"code[".concat(r,"]"),onBlur:h.handleBlur,onKeyDown:function(e){return function(e,r){if("Enter"===e.code){if(h.values.code[r])return void h.setFieldValue("code[".concat(r,"]"),"");if(r>0)return void h.setFieldValue("code[".concat(r,"]"),"")}Number.isInteger(parseInt(e.key,10))&&h.setFieldValue("code[".concat(r,"]"),e.key)}(e,r)},onPaste:S,value:h.values.code[r],sx:{display:"inline-block",textAlign:"center","& .MuiInputBase-input":{textAlign:"center"}}},"code-".concat(r))}))}),Boolean(Array.isArray(h.touched.code)&&6===h.touched.code.length&&h.errors.code)&&(0,t.jsx)(b.Z,{error:!0,sx:{mx:"14px"},children:Array.isArray(h.errors.code)&&h.errors.code.find((function(e){return void 0!==e}))}),h.errors.submit&&(0,t.jsx)(l.Z,{sx:{mt:3},children:(0,t.jsx)(b.Z,{error:!0,children:h.errors.submit})}),(0,t.jsx)(l.Z,{sx:{mt:3},children:(0,t.jsx)(j.Z,{disabled:h.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Verify"})})]})},k=n(37510),A=function(){var e=(0,c.useRouter)(),r=(0,Z.a)().platform,n=e.query.disableGuard;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o(),{children:(0,t.jsx)("title",{children:"Verify Code | Creatalog"})}),(0,t.jsx)(l.Z,{sx:{backgroundColor:"background.default",display:"flex",flexDirection:"column",minHeight:"100vh"},children:(0,t.jsxs)(u.Z,{elevation:16,sx:{p:4},children:[(0,t.jsxs)(l.Z,{sx:{alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,t.jsx)(s(),{href:"/",passHref:!0,children:(0,t.jsx)("a",{children:(0,t.jsx)(k.T,{sx:{height:40,width:40}})})}),(0,t.jsx)(d.Z,{variant:"h4",children:"Verify Code"}),(0,t.jsx)(d.Z,{color:"textSecondary",sx:{mt:2},variant:"body2",children:"Confirm registration using your verification code"})]}),(0,t.jsx)(l.Z,{sx:{flexGrow:1,mt:3},children:"Amplify"===r&&(0,t.jsx)(S,{})}),(0,t.jsx)(f.Z,{sx:{my:3}}),"Amplify"===r&&(0,t.jsx)("div",{children:(0,t.jsx)(s(),{href:n?"/authentication/login?disableGuard=".concat(n):"/authentication/login",passHref:!0,children:(0,t.jsx)(h.Z,{color:"textSecondary",variant:"body2",children:"Did you not receive the code?"})})})]})})]})}}},function(e){e.O(0,[429,161,510,774,888,179],(function(){return r=64518,e(e.s=r);var r}));var r=e.O();_N_E=r}]);