(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6684],{49837:function(e,t,r){"use strict";r.d(t,{Z:function(){return p}});var i=r(87462),n=r(63366),o=r(67294),a=r(86010),l=r(94780),s=r(81719),c=r(78884),d=r(81401),u=r(1588),h=r(34867);function f(e){return(0,h.Z)("MuiCard",e)}(0,u.Z)("MuiCard",["root"]);var m=r(85893);const v=["className","raised"],g=(0,s.ZP)(d.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"})));var p=o.forwardRef((function(e,t){const r=(0,c.Z)({props:e,name:"MuiCard"}),{className:o,raised:s=!1}=r,d=(0,n.Z)(r,v),u=(0,i.Z)({},r,{raised:s}),h=(e=>{const{classes:t}=e;return(0,l.Z)({root:["root"]},f,t)})(u);return(0,m.jsx)(g,(0,i.Z)({className:(0,a.Z)(h.root,o),elevation:s?8:void 0,ref:t,ownerState:u},d))}))},44373:function(e,t,r){"use strict";var i=r(63366),n=r(87462),o=r(67294),a=r(86010),l=r(94780),s=r(41796),c=r(81719),d=r(78884),u=r(75741),h=r(85893);const f=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],m=(0,c.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,"vertical"===r.orientation&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&"vertical"===r.orientation&&t.withChildrenVertical,"right"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignRight,"left"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignLeft]}})((({theme:e,ownerState:t})=>(0,n.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:(0,s.Fq)(e.palette.divider,.08)},"inset"===t.variant&&{marginLeft:72},"middle"===t.variant&&"horizontal"===t.orientation&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},"middle"===t.variant&&"vertical"===t.orientation&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},"vertical"===t.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"})),(({theme:e,ownerState:t})=>(0,n.Z)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,top:"50%",content:'""',transform:"translateY(50%)"}})),(({theme:e,ownerState:t})=>(0,n.Z)({},t.children&&"vertical"===t.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:`thin solid ${(e.vars||e).palette.divider}`,transform:"translateX(0%)"}})),(({ownerState:e})=>(0,n.Z)({},"right"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}}))),v=(0,c.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.wrapper,"vertical"===r.orientation&&t.wrapperVertical]}})((({theme:e,ownerState:t})=>(0,n.Z)({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},"vertical"===t.orientation&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}))),g=o.forwardRef((function(e,t){const r=(0,d.Z)({props:e,name:"MuiDivider"}),{absolute:o=!1,children:s,className:c,component:g=(s?"div":"hr"),flexItem:p=!1,light:x=!1,orientation:b="horizontal",role:Z=("hr"!==g?"separator":void 0),textAlign:w="center",variant:y="fullWidth"}=r,j=(0,i.Z)(r,f),S=(0,n.Z)({},r,{absolute:o,component:g,flexItem:p,light:x,orientation:b,role:Z,textAlign:w,variant:y}),A=(e=>{const{absolute:t,children:r,classes:i,flexItem:n,light:o,orientation:a,textAlign:s,variant:c}=e,d={root:["root",t&&"absolute",c,o&&"light","vertical"===a&&"vertical",n&&"flexItem",r&&"withChildren",r&&"vertical"===a&&"withChildrenVertical","right"===s&&"vertical"!==a&&"textAlignRight","left"===s&&"vertical"!==a&&"textAlignLeft"],wrapper:["wrapper","vertical"===a&&"wrapperVertical"]};return(0,l.Z)(d,u.V,i)})(S);return(0,h.jsx)(m,(0,n.Z)({as:g,className:(0,a.Z)(A.root,c),role:Z,ref:t,ownerState:S},j,{children:s?(0,h.jsx)(v,{className:A.wrapper,ownerState:S,children:s}):null}))}));t.Z=g},64518:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify-code",function(){return r(8732)}])},46723:function(e,t,r){"use strict";r.d(t,{s:function(){return n}});var i=r(67294),n=function(){var e=(0,i.useRef)(!1);return(0,i.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),(0,i.useCallback)((function(){return e.current}),[])}},8732:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return I}});var i=r(85893),n=r(9008),o=r.n(n),a=r(41664),l=r.n(a),s=r(11163),c=r(30120),d=r(49837),u=r(29630),h=r(44373),f=r(68346),m=r(47568),v=r(20414),g=r(67294),p=r(74231),x=r(82580),b=r(67836),Z=r(32631),w=r(54225),y=r(89731),j=r(46723),S=r(86501),A=function(){var e=(0,j.s)(),t=(0,s.useRouter)(),r=(0,y.a)(),n=r.verifyCode,o=r.registerBackend,a=(0,g.useState)(""),l=a[0],d=a[1],h=JSON.parse(localStorage.getItem("currentUser"));console.log("get user info"+h);var f=(0,x.TA)({enableReinitialize:!0,initialValues:{email:h.email,code:["","","","","",""],submit:null},validationSchema:p.Ry({email:p.Z_().email("Must be a valid email").max(255).required("Email is required"),code:p.IX().of(p.Z_().required("Code is required"))}),onSubmit:function(){var r=(0,m.Z)((function(r,i){var a;return(0,v.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),console.log("verify code"),[4,n(r.email,r.code.join(""))];case 1:return l.sent(),console.log("register in the backend"),[4,o(h.email,h.name,h.provider)];case 2:return l.sent(),e()&&t.push("/login").catch(console.error),[3,4];case 3:return a=l.sent(),console.error(a),S.ZP.error(a.message),e()&&(i.setStatus({success:!1}),i.setErrors({submit:a.message}),i.setSubmitting(!1)),[3,4];case 4:return[2]}}))}));return function(e,t){return r.apply(this,arguments)}}()});(0,g.useEffect)((function(){var e=sessionStorage.getItem("username");e&&d(e)}),[]);var A=function(e){var t=e.clipboardData.getData("text").split("");if(6===t.length){var r=!0;t.forEach((function(e){Number.isInteger(parseInt(e,10))||(r=!1)})),r&&f.setFieldValue("code",t)}};return(0,i.jsxs)("form",{noValidate:!0,onSubmit:f.handleSubmit,children:[l?(0,i.jsx)(b.Z,{disabled:!0,fullWidth:!0,margin:"normal",value:l}):(0,i.jsx)(b.Z,{autoFocus:!0,error:Boolean(f.touched.email&&f.errors.email),fullWidth:!0,label:"Email Address",margin:"normal",name:"email",onBlur:f.handleBlur,onChange:f.handleChange,type:"email",value:f.values.email}),(0,i.jsx)(u.Z,{color:"textSecondary",sx:{mb:2,mt:3},variant:"subtitle2",children:"Verification code"}),(0,i.jsx)(c.Z,{sx:{columnGap:"16px",display:"grid",gridTemplateColumns:"repeat(7, 1fr)",pt:1},children:[1,2,3,4,5,6].map((function(e,t){return(0,i.jsx)(b.Z,{error:Boolean(Array.isArray(f.touched.code)&&6===f.touched.code.length&&f.errors.code),fullWidth:!0,name:"code[".concat(t,"]"),onBlur:f.handleBlur,onKeyDown:function(e){return function(e,t){if("Enter"===e.code){if(f.values.code[t])return void f.setFieldValue("code[".concat(t,"]"),"");if(t>0)return void f.setFieldValue("code[".concat(t,"]"),"")}Number.isInteger(parseInt(e.key,10))&&f.setFieldValue("code[".concat(t,"]"),e.key)}(e,t)},onPaste:A,value:f.values.code[t],sx:{display:"inline-block",textAlign:"center","& .MuiInputBase-input":{textAlign:"center"}}},"code-".concat(t))}))}),Boolean(Array.isArray(f.touched.code)&&6===f.touched.code.length&&f.errors.code)&&(0,i.jsx)(Z.Z,{error:!0,sx:{mx:"14px"},children:Array.isArray(f.errors.code)&&f.errors.code.find((function(e){return void 0!==e}))}),f.errors.submit&&(0,i.jsx)(c.Z,{sx:{mt:3},children:(0,i.jsx)(Z.Z,{error:!0,children:f.errors.submit})}),(0,i.jsx)(c.Z,{sx:{mt:3},children:(0,i.jsx)(w.Z,{disabled:f.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Verify"})})]})},C=r(37510),I=function(){var e=(0,s.useRouter)(),t=(0,y.a)().platform,r=e.query.disableGuard;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o(),{children:(0,i.jsx)("title",{children:"Verify Code | Creatalog"})}),(0,i.jsx)(c.Z,{sx:{backgroundColor:"background.default",display:"flex",flexDirection:"column",minHeight:"100vh"},children:(0,i.jsxs)(d.Z,{elevation:16,sx:{p:4},children:[(0,i.jsxs)(c.Z,{sx:{alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,i.jsx)(l(),{href:"/",passHref:!0,children:(0,i.jsx)("a",{children:(0,i.jsx)(C.T,{sx:{height:40,width:40}})})}),(0,i.jsx)(u.Z,{variant:"h4",children:"Verify Code"}),(0,i.jsx)(u.Z,{color:"textSecondary",sx:{mt:2},variant:"body2",children:"Confirm registration using your verification code"})]}),(0,i.jsx)(c.Z,{sx:{flexGrow:1,mt:3},children:"Amplify"===t&&(0,i.jsx)(A,{})}),(0,i.jsx)(h.Z,{sx:{my:3}}),"Amplify"===t&&(0,i.jsx)("div",{children:(0,i.jsx)(l(),{href:r?"/authentication/login?disableGuard=".concat(r):"/authentication/login",passHref:!0,children:(0,i.jsx)(f.Z,{color:"textSecondary",variant:"body2",children:"Did you not receive the code?"})})})]})})]})}},9008:function(e,t,r){e.exports=r(5443)}},function(e){e.O(0,[9429,8724,7510,9774,2888,179],(function(){return t=64518,e(e.s=t);var t}));var t=e.O();_N_E=t}]);