(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[684],{49837:function(e,r,n){"use strict";n.d(r,{Z:function(){return g}});var t=n(87462),i=n(63366),o=n(67294),a=n(86010),s=n(94780),l=n(81719),c=n(78884),u=n(70918),d=n(1588),f=n(34867);function m(e){return(0,f.Z)("MuiCard",e)}(0,d.Z)("MuiCard",["root"]);var h=n(85893);const x=["className","raised"],v=(0,l.ZP)(u.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,r)=>r.root})((()=>({overflow:"hidden"})));var g=o.forwardRef((function(e,r){const n=(0,c.Z)({props:e,name:"MuiCard"}),{className:o,raised:l=!1}=n,u=(0,i.Z)(n,x),d=(0,t.Z)({},n,{raised:l}),f=(e=>{const{classes:r}=e;return(0,s.Z)({root:["root"]},m,r)})(d);return(0,h.jsx)(v,(0,t.Z)({className:(0,a.Z)(f.root,o),elevation:l?8:void 0,ref:r,ownerState:d},u))}))},64518:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify-code",function(){return n(8732)}])},8732:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return A}});var t=n(85893),i=n(9008),o=n.n(i),a=n(41664),s=n.n(a),l=n(11163),c=n(30120),u=n(49837),d=n(29630),f=n(44373),m=n(68346),h=n(47568),x=n(20414),v=n(67294),g=n(74231),p=n(82580),y=n(67836),Z=n(32631),b=n(54225),j=n(89731),C=n(46723),_=n(86501),S=function(){var e=(0,C.s)(),r=(0,l.useRouter)(),n=(0,j.a)(),i=n.verifyCode,o=n.registerBackend,a=(0,v.useState)(""),s=a[0],u=a[1],f=JSON.parse(localStorage.getItem("userInfo"));console.log("get user info"+f);var m=(0,p.TA)({enableReinitialize:!0,initialValues:{email:f.email,code:["","","","","",""],submit:null},validationSchema:g.Ry({email:g.Z_().email("Must be a valid email").max(255).required("Email is required"),code:g.IX().of(g.Z_().required("Code is required"))}),onSubmit:function(){var n=(0,h.Z)((function(n,t){var a;return(0,x.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),console.log("verify code"),[4,i(n.email,n.code.join(""))];case 1:return s.sent(),console.log("register in the backend"),[4,o(f.email,f.name,f.provider)];case 2:return s.sent(),e()&&r.push("/login").catch(console.error),[3,4];case 3:return a=s.sent(),console.error(a),_.ZP.error(a.message),e()&&(t.setStatus({success:!1}),t.setErrors({submit:a.message}),t.setSubmitting(!1)),[3,4];case 4:return[2]}}))}));return function(e,r){return n.apply(this,arguments)}}()});(0,v.useEffect)((function(){var e=sessionStorage.getItem("username");e&&u(e)}),[]);var S=function(e){var r=e.clipboardData.getData("text").split("");if(6===r.length){var n=!0;r.forEach((function(e){Number.isInteger(parseInt(e,10))||(n=!1)})),n&&m.setFieldValue("code",r)}};return(0,t.jsxs)("form",{noValidate:!0,onSubmit:m.handleSubmit,children:[s?(0,t.jsx)(y.Z,{disabled:!0,fullWidth:!0,margin:"normal",value:s}):(0,t.jsx)(y.Z,{autoFocus:!0,error:Boolean(m.touched.email&&m.errors.email),fullWidth:!0,label:"Email Address",margin:"normal",name:"email",onBlur:m.handleBlur,onChange:m.handleChange,type:"email",value:m.values.email}),(0,t.jsx)(d.Z,{color:"textSecondary",sx:{mb:2,mt:3},variant:"subtitle2",children:"Verification code"}),(0,t.jsx)(c.Z,{sx:{columnGap:"16px",display:"grid",gridTemplateColumns:"repeat(7, 1fr)",pt:1},children:[1,2,3,4,5,6].map((function(e,r){return(0,t.jsx)(y.Z,{error:Boolean(Array.isArray(m.touched.code)&&6===m.touched.code.length&&m.errors.code),fullWidth:!0,name:"code[".concat(r,"]"),onBlur:m.handleBlur,onKeyDown:function(e){return function(e,r){if("Enter"===e.code){if(m.values.code[r])return void m.setFieldValue("code[".concat(r,"]"),"");if(r>0)return void m.setFieldValue("code[".concat(r,"]"),"")}Number.isInteger(parseInt(e.key,10))&&m.setFieldValue("code[".concat(r,"]"),e.key)}(e,r)},onPaste:S,value:m.values.code[r],sx:{display:"inline-block",textAlign:"center","& .MuiInputBase-input":{textAlign:"center"}}},"code-".concat(r))}))}),Boolean(Array.isArray(m.touched.code)&&6===m.touched.code.length&&m.errors.code)&&(0,t.jsx)(Z.Z,{error:!0,sx:{mx:"14px"},children:Array.isArray(m.errors.code)&&m.errors.code.find((function(e){return void 0!==e}))}),m.errors.submit&&(0,t.jsx)(c.Z,{sx:{mt:3},children:(0,t.jsx)(Z.Z,{error:!0,children:m.errors.submit})}),(0,t.jsx)(c.Z,{sx:{mt:3},children:(0,t.jsx)(b.Z,{disabled:m.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Verify"})})]})},w=n(37510),A=function(){var e=(0,l.useRouter)(),r=(0,j.a)().platform,n=e.query.disableGuard;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o(),{children:(0,t.jsx)("title",{children:"Verify Code | Creatalog"})}),(0,t.jsx)(c.Z,{sx:{backgroundColor:"background.default",display:"flex",flexDirection:"column",minHeight:"100vh"},children:(0,t.jsxs)(u.Z,{elevation:16,sx:{p:4},children:[(0,t.jsxs)(c.Z,{sx:{alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,t.jsx)(s(),{href:"/",passHref:!0,children:(0,t.jsx)("a",{children:(0,t.jsx)(w.T,{sx:{height:40,width:40}})})}),(0,t.jsx)(d.Z,{variant:"h4",children:"Verify Code"}),(0,t.jsx)(d.Z,{color:"textSecondary",sx:{mt:2},variant:"body2",children:"Confirm registration using your verification code"})]}),(0,t.jsx)(c.Z,{sx:{flexGrow:1,mt:3},children:"Amplify"===r&&(0,t.jsx)(S,{})}),(0,t.jsx)(f.Z,{sx:{my:3}}),"Amplify"===r&&(0,t.jsx)("div",{children:(0,t.jsx)(s(),{href:n?"/authentication/login?disableGuard=".concat(n):"/authentication/login",passHref:!0,children:(0,t.jsx)(m.Z,{color:"textSecondary",variant:"body2",children:"Did you not receive the code?"})})})]})})]})}}},function(e){e.O(0,[429,812,764,774,888,179],(function(){return r=64518,e(e.s=r);var r}));var r=e.O();_N_E=r}]);