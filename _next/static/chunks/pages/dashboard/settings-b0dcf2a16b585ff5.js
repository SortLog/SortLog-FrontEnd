(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6130],{20473:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/settings",function(){return n(91100)}])},91100:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var r=n(47568),s=n(20414),i=n(85893),o=n(67294),a=n(30120),l=n(36336),u=n(29630),d=n(44373),c=n(49837),x=n(62026),f=n(91359),h=n(54225),g=n(67836),m=n(22469),p=n(86501),j=n(9432),Z={background:{position:"fixed",top:0,left:0,width:"100%",height:"100vh",zIndex:10,background:"rgba(0, 0, 0, 0.75)"},card:{top:"30vh",left:"30%",width:"40vw",zIndex:99,overflow:"hidden",position:"fixed"},title:{textAlign:"center",fontSize:24,marginBottom:5},content:{display:"flex",flexDirection:"column"},text:{width:"50%",left:"25%",marginBottom:5},buttons:{marginBottom:5,display:"flex",justifyContent:"space-around"}},v=function(e){var t=(0,o.useState)(""),n=t[0],r=t[1],s=(0,o.useState)(""),a=s[0],l=s[1],d=(0,o.useState)(""),m=d[0],v=d[1],w=(0,o.useState)(!1),y=w[0],C=w[1];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:Z.background,onClick:e.onModalDismiss}),y?(0,i.jsxs)(c.Z,{sx:Z.card,children:[(0,i.jsxs)(f.Z,{sx:Z.content,children:[(0,i.jsx)(u.Z,{sx:Z.title,color:"textSecondary",gutterBottom:!0,children:"Your verification code and new password are required"}),(0,i.jsx)(g.Z,{disabled:!0,sx:Z.text,required:!0,id:"outlined-required",label:"Email",value:n,onChange:function(e){return r(e.target.value)},InputProps:{readOnly:!0}}),(0,i.jsx)(g.Z,{sx:Z.text,required:!0,id:"outlined-required",label:"verification code",onChange:function(e){return l(e.target.value)}}),(0,i.jsx)(g.Z,{sx:Z.text,required:!0,id:"outlined-required",label:"new password",type:"password",onChange:function(e){return v(e.target.value)}})]}),(0,i.jsxs)(x.Z,{sx:Z.buttons,children:[(0,i.jsx)(h.Z,{onClick:function(){j.g.forgotPasswordSubmit(n,a,m).then((function(){C(!1),p.ZP.success("New password updated"),e.onModalDismiss})).catch((function(e){console.log(e),p.ZP.error(e.message)}))},size:"small",children:"SAVE"}),(0,i.jsx)(h.Z,{onClick:e.onModalDismiss,size:"small",children:"CANCEL"})]})]}):(0,i.jsxs)(c.Z,{sx:Z.card,children:[(0,i.jsxs)(f.Z,{sx:Z.content,children:[(0,i.jsx)(u.Z,{sx:Z.title,color:"textSecondary",gutterBottom:!0,children:"Your email address is required"}),(0,i.jsx)(g.Z,{sx:Z.text,required:!0,id:"outlined-required",label:"Email",value:n,onChange:function(e){return r(e.target.value)}})]}),(0,i.jsxs)(x.Z,{sx:Z.buttons,children:[(0,i.jsx)(h.Z,{onClick:function(){j.g.forgotPassword(n).then((function(){C(!0),p.ZP.success("A verification code has been sent to your email")})).catch((function(e){console.log(e),p.ZP.error(e.message)}))},size:"small",children:"CONFIRM"}),(0,i.jsx)(h.Z,{onClick:e.onModalDismiss,size:"small",children:"CANCEL"})]})]})]})},w={card:{margin:"40px"},cardInput:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",gap:"10%",width:"100%"},textField:{width:"40%",margin:"20px 0"}};function y(){var e=JSON.parse(localStorage.getItem("currentUser"));!function(){var e=(0,r.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:return[4,j.g.currentUserInfo()];case 1:return[2,e.sent()]}}))}))}();(0,o.useEffect)((function(){j.g.currentAuthenticatedUser({bypassCache:!1}).then((function(e){console.log(e),B(e)})).catch((function(e){return console.log(e)}))}),[]);var t=(0,o.useState)(e.name),n=t[0],Z=t[1],y=(0,o.useState)(e.email),C=y[0],S=y[1],b=(0,o.useState)(e.provider),P=b[0],q=b[1],E=(0,o.useState)(""),N=E[0],_=E[1],k=(0,o.useState)(""),I=k[0],A=k[1],z=(0,o.useState)(""),F=z[0],B=z[1],V=(0,o.useState)(!1),D=V[0],O=V[1];return(0,i.jsxs)(i.Fragment,{children:[D&&(0,i.jsx)(v,{onModalDismiss:function(){O(!1)}}),(0,i.jsxs)(l.Z,{maxWidth:"md",children:[(0,i.jsx)(a.Z,{sx:{width:"100%",maxWidth:500}}),(0,i.jsx)(u.Z,{sx:{fontSize:40},color:"text.secondary",gutterBottom:!0,children:"User Profile"}),(0,i.jsx)(d.Z,{variant:"middle"}),(0,i.jsxs)(c.Z,{style:w.card,sx:{minWidth:275},children:[(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(u.Z,{sx:{fontSize:20},color:"text.secondary",gutterBottom:!0,children:"Personal Information"}),(0,i.jsxs)("div",{style:w.cardInput,children:[(0,i.jsx)(g.Z,{style:w.textField,required:!0,id:"outlined-required",label:"Name",defaultValue:e.name,value:n,onChange:function(e){return Z(e.target.value)}}),(0,i.jsx)(g.Z,{style:w.textField,required:!0,inputProps:{readOnly:!0},id:"outlined-password-input",label:"Email",defaultValue:e.email,value:C,onChange:function(e){return S(e.target.value)}}),(0,i.jsx)(g.Z,{style:w.textField,required:!0,id:"outlined-read-only-input",label:"Company Name",defaultValue:e.provider,value:P,onChange:function(e){return q(e.target.value)}})]})]}),(0,i.jsx)(x.Z,{children:(0,i.jsx)(h.Z,{onClick:function(){console.log("change user info"+e),e.name=n,e.provider=P;try{m._W(e._id,e),localStorage.setItem("currentUser",JSON.stringify(e)),p.ZP.success("Personal info updated successfully")}catch(t){console.log(t),p.ZP.error(t.message)}},children:"SAVE CHANGES"})})]}),(0,i.jsxs)(c.Z,{style:w.card,sx:{minWidth:275},children:[(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(u.Z,{sx:{fontSize:20},color:"text.secondary",gutterBottom:!0,children:"Change Password"}),(0,i.jsxs)("div",{style:w.cardInput,children:[(0,i.jsx)(g.Z,{style:w.textField,required:!0,id:"outlined-required",label:"Current Password",type:"password",defaultValue:"",onChange:function(e){return _(e.target.value)},value:N}),(0,i.jsx)(g.Z,{style:w.textField,required:!0,id:"outlined-required",label:"New Password",type:"password",defaultValue:"",onChange:function(e){return A(e.target.value)},value:I})]})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)(x.Z,{children:(0,i.jsx)(h.Z,{onClick:function(){j.g.currentAuthenticatedUser().then((function(){if(N!==I)return j.g.changePassword(F,N,I);p.ZP.error("New password should not be same as current password")})).then((function(e){console.log(e),p.ZP.success("Password changed")})).catch((function(e){console.log(e),p.ZP.error(e.message)}))},children:"SAVE CHANGES"})}),(0,i.jsx)(h.Z,{sx:{margin:"0 30px",textDecoration:"none"},onClick:function(){O(!0)},children:"Forgot password?"})]})]})]})]})}},22469:function(e,t,n){"use strict";n.d(t,{CX:function(){return s},_W:function(){return i}});var r=n(21744),s=function(e){return(0,r.h)("/users/email/".concat(e),{method:"GET"})},i=function(e,t){return(0,r.h)("/users/".concat(e),{method:"PUT",data:t})}}},function(e){e.O(0,[9429,6332,9774,2888,179],(function(){return t=20473,e(e.s=t);var t}));var t=e.O();_N_E=t}]);